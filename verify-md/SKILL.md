---
name: verify-md
description: 要件定義書やドキュメントの矛盾や間違い、無駄な重複を徹底的に調査し、不明点を質問して修正する
argument-hint: [@document.md]
user-invocable: true
model: opus
---

# 要件定義・仕様書の最終確認

このスキルはプロジェクト開始初期の要件定義作成時に、最後の確認として使用します。
$ARGUMENTS で指定されたドキュメントの内容を徹底的に調査し、必要に応じて修正します。

## 調査項目

### 1. 矛盾の検出
- 記述内容に矛盾がないか
- 他のドキュメントとの整合性は取れているか
- 技術的に実現不可能な要件はないか
- 前後の文脈で齟齬がないか

### 2. 重複の検出と削減
- **同じ内容が複数箇所に記述されていないか**
- 冗長な説明がないか
- 統合可能なセクションはないか
- 他のドキュメントと重複している情報はないか（適切な参照に置き換え可能か）

### 3. 不明確な箇所の特定
- 曖昧な表現がないか
- 具体性が不足している箇所はないか
- 前提条件が明記されていない箇所はないか
- 判断基準が不明確な箇所はないか

### 4. 欠落の確認
- 必要な情報が抜けていないか
- エッジケースの考慮が漏れていないか
- エラーハンドリングの記述はあるか
- セキュリティ要件は明記されているか

### 5. 技術的妥当性
- 技術スタックとの整合性はあるか
- パフォーマンス要件は現実的か
- スケーラビリティは考慮されているか
- メンテナンス性は保たれているか

## 実行手順

1. **ドキュメントの精読**
   - 全体を通して読み、構造を把握する
   - 各セクションの関連性を確認する

2. **矛盾・不整合の抽出**
   - 記述内容の論理的矛盾を洗い出す
   - 他の参照ドキュメント（CLAUDE.md、TODO.md、doc/*.md）との整合性を確認する

3. **重複の特定と整理**
   - 同じ内容が複数箇所に書かれている箇所を特定
   - 重複を削除し、必要に応じて参照形式に変更する案を提示
   - 冗長な説明を簡潔にする案を提示

4. **不明点の質問**
   - **重要**: 少しでも理解が不十分な箇所があれば、必ず AskUserQuestion Tool を使用してユーザーに確認する
   - 複数の解釈が可能な箇所は選択肢を提示して質問する
   - 曖昧な要件は具体例を求める
   - 重複削除によって情報が失われる可能性がある場合は確認する

5. **修正の実行**
   - ユーザーの確認を得てから Edit Tool で修正を実行する
   - 修正内容を明確に説明する
   - 重複削除では元の情報を失わないように注意する

6. **レポート作成**
   - 発見した問題点を優先度順に整理する
   - 実施した修正内容をまとめる
   - 各問題について具体的な改善案を提示する

## 注意事項

- **徹底的に調査**: 表面的なチェックではなく、深く掘り下げる
- **AskUserQuestion の積極利用**: 不明点は推測せず必ず質問する
- **建設的な指摘**: 問題点だけでなく改善案も提示する
- **プロジェクトコンテキスト**: CLAUDE.md の開発ガイドラインに沿っているかも確認する
- **重複削減の原則**:
  - DRY原則（Don't Repeat Yourself）に従う
  - 重要な情報は失わない
  - 適切な参照形式を使用する
  - 読みやすさを優先する
